/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * ThumbNail.java
 *
 * Created on 11.04.2010, 16:42:35
 */

package celsius.gui;

import celsius.gui.CelsiusTable;
import celsius.data.Item;
import celsius.SwingWorkers.ThreadLoadThumbnail;
import celsius.data.TableRow;
import java.awt.Color;
import java.awt.Dimension;
import javax.swing.JLabel;
import javax.swing.UIManager;

/**
 *
 * @author cnsaeman
 */
public class ThumbNail extends javax.swing.JPanel {

    public int spx;
    public int spy;

    public TableRow tableRow;
    public final CelsiusTable DT;

    /** Creates new form ThumbNail */
    public ThumbNail(TableRow tr, CelsiusTable dt) {
        DT=dt;
        initComponents();
        spx=dt.MF.RSC.guiScale(140);
        spy=dt.MF.RSC.guiScale(160);
        setPreferredSize(new Dimension(spx-3,spy-3));
        setMaximumSize(new Dimension(spx-3,spy-3));
        jLIcon.setPreferredSize(new Dimension(spx-3,spy-20-3));
        jLIcon.setMaximumSize(new Dimension(spx-3,spy-20-3));
        setBackground(Color.white);
        jLIcon.setAlignmentX(JLabel.CENTER_ALIGNMENT);
        jLIcon.setAlignmentY(JLabel.CENTER_ALIGNMENT);
        jLIcon.setHorizontalAlignment(JLabel.CENTER);
        jLIcon.addMouseListener(DT);
        jTFDesc.addMouseListener(DT);
        tableRow=tr;
        jLIcon.setName(tableRow.get("id"));
        jTFDesc.setName(tableRow.get("id"));
        jTFDesc.setText("loading");
        DT.TPE.execute(new ThreadLoadThumbnail(this,DT.MF.RSC));
    }

    public void updateDoc(Item d) {
        jLIcon.setName(tableRow.get("id"));
        jTFDesc.setName(tableRow.get("id"));
        DT.TPE.execute(new ThreadLoadThumbnail(this,DT.MF.RSC));
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLIcon = new javax.swing.JLabel();
        jTFDesc = new javax.swing.JLabel();

        setLayout(new java.awt.BorderLayout());
        add(jLIcon, java.awt.BorderLayout.CENTER);

        jTFDesc.setFont(jTFDesc.getFont().deriveFont(jTFDesc.getFont().getStyle() & ~java.awt.Font.BOLD, jTFDesc.getFont().getSize()-2));
        jTFDesc.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        add(jTFDesc, java.awt.BorderLayout.SOUTH);
    }// </editor-fold>//GEN-END:initComponents


    // Variables declaration - do not modify//GEN-BEGIN:variables
    public javax.swing.JLabel jLIcon;
    public javax.swing.JLabel jTFDesc;
    // End of variables declaration//GEN-END:variables

    public void setWhite() {
        setComponentPopupMenu(null);
        setBackground(Color.WHITE);
        repaint();
    }

    public void setGrey() {
        setComponentPopupMenu(DT.MF.jPMItemTable);
        setBackground(UIManager.getColor("Table[Enabled+Selected].textBackground"));
        repaint();
    }

}
